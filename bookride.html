<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book a Ride - UrbanWheels</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }

    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  </style>
</head>

<body class="bg-gradient-to-b from-[#0d1b2a] to-[#1b263b] text-white">

  <!-- Navbar -->
  <nav class="bg-[#0d1b2a]/80 p-4 flex justify-between items-center backdrop-blur-md">
    <h1 class="text-3xl font-bold text-white">UrbanWheels</h1>
    <button class="bg-[#415a77] px-5 py-2 rounded-full hover:bg-[#1f3b5c] transition">Login</button>
  </nav>

  <!-- Grid Section -->
<div class="grid grid-cols-12 gap-4 p-6">
  <!-- Map Section - reduced height -->
  <div class="glass rounded-2xl p-4 shadow-xl h-[400px] col-span-7">
    <h2 class="text-xl font-semibold mb-4">Live Map</h2>
    <div id="map" class="w-full h-full rounded-xl"></div>
  </div>

  <!-- Book Ride Section - reduced height -->
  <div class="glass rounded-2xl p-6 shadow-xl col-span-5 h-[400px] overflow-y-auto">
    <h2 class="text-2xl font-bold mb-4 text-white flex items-center gap-2">ðŸš• Book Your Ride</h2>
    <form class="space-y-4 text-sm" id="rideForm">
  <input type="text" id="pickup" placeholder="Pickup Location"
    class="w-full p-3 rounded-md bg-[#415a77]/60 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" />

  <input type="text" id="drop" placeholder="Drop Location"
    class="w-full p-3 rounded-md bg-[#415a77]/60 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" />

  <div class="flex gap-4 items-center">
    <div class="w-1/2 relative">
      <input type="number" id="fareInput" value="100"
        class="w-full p-3 pr-10 rounded-md bg-[#415a77]/60 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" />
      <button type="button" onclick="incrementFare()" title="Add â‚¹10"
        class="absolute right-2 top-[10px] bg-[#00b4d8] px-2 py-1 rounded-md text-sm hover:bg-[#0096c7] transition">+10</button>
    </div>

    <select id="seats"
      class="w-1/2 p-3 rounded-md bg-[#415a77]/60 text-white focus:outline-none focus:ring-2 focus:ring-[#00b4d8]">
      <option disabled selected>Seats</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
    </select>
  </div>

  <button type="submit"
    class="w-full mt-3 bg-gradient-to-r from-[#00b4d8] to-[#0077b6] text-white py-3 rounded-lg hover:opacity-90 transition font-semibold tracking-wide">Confirm Ride</button>
</form>

  </div>
</div>


<script>
  function incrementFare() {
    const fareInput = document.getElementById('fareInput');
    let currentFare = parseInt(fareInput.value) || 0;
    fareInput.value = currentFare + 10;
  }
</script>


  <!-- Pseudo Rides Section -->
  <div class="p-6">
    <h2 class="text-xl font-semibold mb-4">Available Rides</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Ride Card -->
      <div class="glass p-4 rounded-xl shadow-xl hover:scale-[1.02] transition-transform duration-200">
        <h3 class="text-lg font-bold">Ride 1 - Honda City</h3>
        <p>Driver: Rahul Singh</p>
        <p>From: Sector 22</p>
        <p>To: Elante Mall</p>
        <p>ETA: 10 mins</p>
        <p class="text-green-400 font-semibold mt-2">Fare: â‚¹180</p>
        <button class="mt-3 px-4 py-2 bg-[#00b4d8] rounded-full hover:bg-[#0096c7] transition">Book Now</button>
      </div>

      <div class="glass p-4 rounded-xl shadow-xl hover:scale-[1.02] transition-transform duration-200">
        <h3 class="text-lg font-bold">Ride 2 - Swift Dzire</h3>
        <p>Driver: Meena Kumari</p>
        <p>From: PGI</p>
        <p>To: ISBT 43</p>
        <p>ETA: 8 mins</p>
        <p class="text-green-400 font-semibold mt-2">Fare: â‚¹140</p>
        <button class="mt-3 px-4 py-2 bg-[#00b4d8] rounded-full hover:bg-[#0096c7] transition">Book Now</button>
      </div>

      <div class="glass p-4 rounded-xl shadow-xl hover:scale-[1.02] transition-transform duration-200">
        <h3 class="text-lg font-bold">Ride 3 - Alto</h3>
        <p>Driver: Aman Verma</p>
        <p>From: Phase 7</p>
        <p>To: Chitkara Univ.</p>
        <p>ETA: 12 mins</p>
        <p class="text-green-400 font-semibold mt-2">Fare: â‚¹220</p>
        <button class="mt-3 px-4 py-2 bg-[#00b4d8] rounded-full hover:bg-[#0096c7] transition">Book Now</button>
      </div>
    </div>
  </div>

  <!-- Google Maps JS -->
  <script>
    function initMap() {
      const center = { lat: 30.7333, lng: 76.7794 }; // Chandigarh
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: center,
        styles: [
          {
            "featureType": "all",
            "elementType": "geometry.fill",
            "stylers": [{ "color": "#1b263b" }]
          }
        ]
      });
      new google.maps.Marker({ position: center, map: map });
    }
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE&callback=initMap"></script>
    <script>
  document.getElementById('rideForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const pickup = document.getElementById('pickup').value.trim();
    const drop = document.getElementById('drop').value.trim();
    const fare = parseInt(document.getElementById('fareInput').value);
    const seats = parseInt(document.getElementById('seats').value);

    if (!pickup || !drop || !fare || !seats) {
      alert("Please fill all fields properly.");
      return;
    }

    try {
      const res = await fetch('http://localhost:3000/api/rides/book', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ pickup, drop, fare, seats })
      });

      const data = await res.json();
      alert(data.message || 'Booking Failed');
    } catch (err) {
      alert("Server error. Check if backend is running.");
      console.error(err);
    }
  });
</script>


</body>

</html>
